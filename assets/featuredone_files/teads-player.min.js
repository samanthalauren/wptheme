!function(teads){Date.now||(Date.now=function(){return(new Date).getTime()}),Array.isArray||(Array.isArray=function(a){return"[object Array]"===Object.prototype.toString.call(a)}),window.JSON||(window.JSON={parse:function(sJSON){return eval("("+sJSON+")")},stringify:function(){var a=Object.prototype.toString,b={'"':'\\"',"\\":"\\\\","\b":"\\b","\f":"\\f","\n":"\\n","\r":"\\r","	":"\\t"},c=function(a){return b[a]||"\\u"+(a.charCodeAt(0)+65536).toString(16).substr(1)},d=/[\\"\u0000-\u001F\u2028\u2029]/g;return function e(b){if(null==b)return"null";if("number"==typeof b)return isFinite(b)?b.toString():"null";if("boolean"==typeof b)return b.toString();if("object"==typeof b){if("function"==typeof b.toJSON)return e(b.toJSON());if(Array.isArray(b)){for(var f="[",g=0;g<b.length;g++)f+=(g?", ":"")+e(b[g]);return f+"]"}if("[object Object]"===a.call(b)){var h=[];for(var i in b)b.hasOwnProperty(i)&&h.push(e(i)+": "+e(b[i]));return"{"+h.join(", ")+"}"}}return'"'+b.toString().replace(d,c)+'"'}}()}),Function.prototype.bind||(Function.prototype.bind=function(a){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var b=Array.prototype.slice.call(arguments,1),c=this,d=function(){},e=function(){return c.apply(this instanceof d?this:a,b.concat(Array.prototype.slice.call(arguments)))};return d.prototype=this.prototype,e.prototype=new d,e});try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.find=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("predicate must be a function");for(var d,e=Object(a),f=e.length>>>0,g=0;f>g;g++)if(d=e[g],b.call(c,d,g,e))return d},a.forEach=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");for(var d,e=Object(a),f=e.length>>>0,g=0;f>g;)g in e&&(d=e[g],b.call(c,d,g,e)),g++},a.filter=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");var d=Object(a),e=d.length>>>0;if(e>d.length)throw new TypeError("negative length");for(var f=[],g=0;e>g;g++)if(g in d){var h=d[g];b.call(c,h,g,d)&&f.push(h)}return f},a.some=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");var d=Object(a),e=d.length>>>0;if(e>d.length)throw new TypeError("negative length");for(var f=0;e>f;f++)if(f in d&&b.call(c,d[f],f,d))return!0;return!1},a.indexOf=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");var d=Object(a),e=d.length>>>0;if(0===e)return-1;var f=+c||0;if(Math.abs(f)===1/0&&(f=0),f>=e)return-1;for(var g=Math.max(f>=0?f:e-Math.abs(f),0);e>g;){if(g in d&&d[g]===b)return g;g++}return-1},a.map=function(a,b,c){if(null==a)throw new TypeError("array is null or undefined");if("function"!=typeof b)throw new TypeError("callback must be a function");for(var d,e,f=Object(a),g=f.length>>>0,h=new Array(g),i=0;g>i;)i in f&&(d=f[i],e=b.call(c,d,i,f),h[i]=e),i++;return h},a.unique=function(a){if(null==a)throw new TypeError("array is null or undefined");var b={};return this.filter(a,function(a){return!(b[a]=++b[a]||0)})},a}();a.ArrayHelper=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.isURL=function(a){var b=/^\(?((?:(http|https|ftp):\/\/)|\/\/)?(?:((?:[^\W\s]|\.|-|[:]{1})+)@{1})?((?:www.)?(?:[^\W\s]|\.|-)+[\.][^\W\s]{2,4}|localhost(?=\/)|\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3})(?::(\d*))?([\/]?[^\s\?]*[\/]{1})*(?:\/?([^\s\n\?\[\]\{\}\#]*(?:(?=\.)){1}|[^\s\n\?\[\]\{\}\.\#]*)?([\.]{1}[^\s\?\#]*)?)?(?:\?{1}([^\s\n\#]*))?([\#][^\s\n]*)?\)?$/i;return"string"==typeof a&&b.test(a)},a.pad=function(a,b){void 0===b&&(b="00");var c=String(a);return b.substring(0,b.length-c.length)+c},a.ucfirst=function(a){return a.charAt(0).toUpperCase()+a.substr(1)},a.rand=function(a,b){void 0===b&&(b=!0);for(var c=b?"0123456789":"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",d="",e=0;a>e;e++)d+=c.charAt(Math.floor(Math.random()*c.length));return d},a.trim=function(a){return a.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},a}();a.StringHelper=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function b(){}return b.seconds=function(a){if(!a)return NaN;var b=a.split("."),c=b[0].split(":"),d=3600*Number(c[0])+60*Number(c[1])+Number(c[2]);return 2===b.length&&(d=Number(d+"."+b[1])),d},b.offset=function(b){void 0===b&&(b=0);var c=b?Math.floor(b/3600):0;b-=3600*c;var d=b?Math.floor(b/60):0;b-=60*d;var e=(b%1).toFixed(3).substr(1);return b=Math.floor(b),a.StringHelper.pad(c)+":"+a.StringHelper.pad(d)+":"+a.StringHelper.pad(b)+e},b.hasFlash=function(){var a="Shockwave",b="Flash";try{a=new ActiveXObject(a+b+"."+a+b)}catch(c){a=navigator.plugins[a+" "+b]}return!!a},b.hasFlashVersion=function(a){return Number(this.getFlashVersion()[0])>=a},b.getFlashVersion=function(){try{try{var a=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");try{a.AllowScriptAccess="always"}catch(b){return["6","0","0"]}}catch(c){}return new ActiveXObject("ShockwaveFlash.ShockwaveFlash").GetVariable("$version").replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(d){try{if(navigator.mimeTypes["application/x-shockwave-flash"].enabledPlugin)return(navigator.plugins["Shockwave Flash 2.0"]||navigator.plugins["Shockwave Flash"]).description.replace(/\D+/g,",").match(/^,?(.+),?$/)[1].split(",")}catch(e){}}return["0","0","0"]},b.getAudioContext=function(){return window.AudioContext||window.webkitAudioContext},b.extend=function(){for(var a=[],c=0;c<arguments.length;c++)a[c-0]=arguments[c];for(var d={},e=0,f=void 0;e<a.length;e++){f=a[e];for(var g in f)Object.prototype.hasOwnProperty.call(f,g)&&("[object Object]"===Object.prototype.toString.call(f[g])?d[g]=b.extend(d[g],f[g]):void 0!==f[g]&&(d[g]=f[g]))}return d},b.throttle=function(a,b,c){var d=!1;return b=b||250,c=c||this,function(){d||(a.apply(c,arguments),window.setTimeout(function(){d=!1},b),d=!0)}},b.safeUrl=function(a){var b=document.createElement("a");return b.href=a,window.swInstalled&&/(teads|ebu?z)/.test(b.hostname)?"/"+btoa(a).replace(/=/g,"_"):a},b}();a.Utils=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.get=function(a){return decodeURIComponent(document.cookie.replace(new RegExp("(?:(?:^|.*;)\\s*"+encodeURIComponent(a).replace(/[\-\.\+\*]/g,"\\$&")+"\\s*\\=\\s*([^;]*).*$)|^.*$"),"$1"))||null},a.set=function(a,b,c){var d=c?"; expires="+c.toUTCString():"; expires=Tue, 19 Jan 2038 03:14:07 GMT";document.cookie=encodeURIComponent(a)+"="+encodeURIComponent(b)+d+"; path=/"},a}();a.Cookie=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){!function(a){a[a.ANDROID=0]="ANDROID",a[a.WEBOS=1]="WEBOS",a[a.IPHONE=2]="IPHONE",a[a.IPOD=3]="IPOD",a[a.BLACKBERRY=4]="BLACKBERRY",a[a.WINDOWS_PHONE=5]="WINDOWS_PHONE",a[a.ALL=6]="ALL"}(a.MobileName||(a.MobileName={}));var b=a.MobileName,c=function(){function a(){}return a.isDesktop=function(){return!a.isMobile()&&!a.isTablet()},a.isIpad=function(){return/iPad/i.test(a.userAgent)},a.isTablet=function(){var b=/Mobile/i;return a.isIpad()||a.isAndroid()&&!b.test(a.userAgent)},a.isMobile=function(c){void 0===c&&(c=b.ALL);var d=/Android|webOS|iPhone|iPod|Blackberry|Windows Phone/i;switch(c){case b.ANDROID:d=/Android/i;break;case b.WEBOS:d=/webOS/i;break;case b.IPHONE:d=/iPhone/i;break;case b.IPOD:d=/iPod/i;break;case b.BLACKBERRY:d=/Blackberry/i;break;case b.WINDOWS_PHONE:d=/Windows Phone/i}return d.test(a.userAgent)},a.isChromeIos=function(){return/CriOS/i.test(a.userAgent)},a.isFacebookWebview=function(){return/FBAN|FBIOS|FBAV|FBBV|FBDV|FBMD|FBSN|FBSV|FBSS|FBCR|FBID|FBLC|FBOP/i.test(a.userAgent)},a.isAndroidNative=function(){return a.userAgent.indexOf("Mozilla/5.0")>-1&&a.userAgent.indexOf("Android ")>-1&&a.userAgent.indexOf("AppleWebKit")>-1&&!(a.userAgent.indexOf("Chrome")>-1)},a.isAndroid=function(){return/Android/i.test(a.userAgent)},a.isAndroidMobile=function(){return a.isAndroid()&&/(m|M)obile/i.test(a.userAgent)},a.isOldIE=function(b){void 0===b&&(b=9);var c=new RegExp("MSIE [2-"+b+"]{1}");return c.test(a.userAgent)},a.isIE=function(){return/MSIE|Trident/.test(a.userAgent)},a.getIEVersion=function(){var b=a.userAgent.match(/MSIE (\d+)/);return b?Number(b[1]):null},a.getAndroidVersion=function(){for(var b=a.userAgent.match(/Android\s.+\d;/gi)||[""],c=b[0].replace(/(Android\s|\.|;)/gi,"");c.length<3;)c+="0";return parseInt(c,10)},a.getIosVersion=function(){return parseFloat((""+(/CPU.*OS ([0-9_]{1,5})|(CPU like).*AppleWebKit.*Mobile/i.exec(a.userAgent)||[0,""])[1]).replace("undefined","3_2").replace("_",".").replace("_",""))||0},a.isUIWebview=function(){return(this.isMobile(b.IPHONE)||this.isIpad())&&!window.navigator.userAgent.toLowerCase().match(/safari/)&&!window.navigator.standalone},a.videoSupport=function(a){return!!a.createElement("video").canPlayType},a.getLanguage=function(){return(window.navigator.language||window.navigator.browserLanguage||window.navigator.userLanguage||"en").substr(0,2)},a.userAgent=navigator.userAgent,a}();a.Context=c}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.sumologic=function(b,c){void 0===c&&(c=!1),(a.enable||c)&&this.track(b,this.sumoCollector,"[format-player] ")},a.track=function(a,b,c){void 0===c&&(c="");try{b+=b.indexOf("?")<0?"?":"&";var d=new Image;d.src=b+encodeURIComponent(c)+encodeURIComponent(this.stringifyData(a))}catch(e){}},a.stringifyData=function(a){var b=function(a){var b;try{b=JSON.stringify(a)}catch(c){a.toString&&(b=a.toString())}return b};if(a.length)for(var c in a)"function"==typeof a[c]?a[c]=a[c].toString():"object"==typeof a[c]&&(a[c]=b(a[c]));else a=b(a);return a.toString?a.toString():a},a.enable=!1,a.sumoCollector="https://collectors.sumologic.com/receiver/v1/http/ZaVnC4dhaV2OstA92K8Xbn3MlFYZW-oUBicuj44GtIKtbZsUPvY1aTO-DkS5EoVbf_mtsgRWO-otjA_fSTBl1yV_mEd-yGbaQfhOYvtJXPQiK_SjXO-ooQ==?",a}();a.LogSender=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){function b(){var b=a.Cookie.get("teadsDebugLevel");b&&(d=b.split(","),a.ArrayHelper.indexOf(d,"all")>=0&&(d=["debug","info","warn","error"]));var f=a.Cookie.get("teadsDebugNamespace");f&&(e=f.split(",")),d.length&&!a.Logger&&(a.Context.isIE()?(c.log("Teads Media Framework > Debug mode"),c.log("Package: teads-player v0.8.0")):(c.log("%cTeads Media Framework %c> Debug mode","color:#7ebde5;font-family:Helvetica,sans-serif;font-size:2em;","color:#aaa;font-family:Helvetica,sans-serif;font-size:2em;"),c.log("%cPackage: teads-player v0.8.0","color:#7ebde5;font-style:italic;")))}a.START_TIME=a.START_TIME||Date.now();var c,d=[],e=[],f=function(){function a(){}return a.prototype.log=function(){},a}();c=window.console&&console.log?window.console:new f,b();var g=function(){function f(a){this.namespace=a,this.console=c}return f.prototype._log=function(f,g){var h=this;if(b(),g.length&&!(a.ArrayHelper.indexOf(d,f)<0)){if(e.length){var i=a.ArrayHelper.some(e,function(a){return 0===h.namespace.indexOf(a)});if(!i)return}var j=Date.now()-a.START_TIME,k=(j/1e3).toFixed(3)+"s";a.Context.isIE()?g=[k+" ["+this.namespace+"] "+g.join(" ")]:g.unshift("%c"+k+" "+this.namespace,"color:#7ebde5;");var l=c[f]||c.log;try{l.apply(c,g)}catch(m){Function.prototype.apply.apply(l,[c,g])}}},f.prototype.debug=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("debug",a)},f.prototype.info=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("info",a)},f.prototype.warn=function(){for(var a=[],b=0;b<arguments.length;b++)a[b-0]=arguments[b];this._log("warn",a)},f.prototype.error=function(){for(var b=[],c=0;c<arguments.length;c++)b[c-0]=arguments[c];try{var d=b.slice(0);d.unshift("ERROR",this.namespace),a.LogSender.sumologic(d,!!(Math.random()<=.1))}catch(e){}this._log("error",b)},f.prototype.table=function(a){c.table&&c.table(a)},f}();a.Logger=g}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.isBase64=function(a){var b=new RegExp("^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$"),c=b.exec(a);return!!(c&&c.length>0)},a.encode=function(a){return window.btoa?btoa(a):a},a.decode=function(a){return window.atob?atob(a):a},a}();a.Base64=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function b(){}return b.createIframe=function(){var a=document.createElement("iframe");return a.style.margin="0px",a.style.padding="0px",a.style.width="0",a.style.height="0",a.style.border="0px",a.style.overflow="hidden",a.setAttribute("scrolling","no"),a},b.isFullscreen=function(a){return a||(a=document),!!(a.fullscreenElement||a.mozFullScreenElement||a.webkitFullscreenElement||a.msFullscreenElement)},b.getWindow=function(a){var c=b.getDocument(a);return c.defaultView||c.parentWindow},b.getDocument=function(a){return a.ownerDocument},b.toggleFullscreen=function(a){b.isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.msExitFullscreen?document.msExitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen():a.requestFullscreen?a.requestFullscreen():a.msRequestFullscreen?a.msRequestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen&&a.webkitRequestFullscreen()},b.addClass=function(c,d){b.hasClass(c,d)||(c.className+=" "+d,c.className=a.StringHelper.trim(c.className))},b.removeClass=function(c,d){if(b.hasClass(c,d)){var e=c.className.split(" ");e.splice(e.indexOf(d),1),c.className=a.StringHelper.trim(e.join(" "))}},b.hasClass=function(b,c){return-1!==a.ArrayHelper.indexOf(b.className.split(" "),c)},b.toggleClass=function(a,c){b.hasClass(a,c)?b.removeClass(a,c):b.addClass(a,c)},b.replaceClass=function(a,c,d){!b.hasClass(a,c)&&b.hasClass(a,d)&&(b.removeClass(a,d),b.addClass(a,c))},b}();a.HTMLHelper=b}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(){}return a.createXmlHttpRequest=function(){var a=null;if(window.XMLHttpRequest&&(a=new XMLHttpRequest),!a||"withCredentials"in a||(a=window.XDomainRequest?new window.XDomainRequest:null),!a){try{a=new ActiveXObject("MSXML2.XMLHTTP.6.0")}catch(b){try{a=new ActiveXObject("MSXML2.XMLHTTP.3.0")}catch(b){throw new Error("could not create XMLHttpRequest nor ActiveXObject")}}a.responseType="msxml-document"}return a},a}();a.Request=b}(teads||(teads={}));var __extends=this&&this.__extends||function(a,b){function c(){this.constructor=a}for(var d in b)b.hasOwnProperty(d)&&(a[d]=b[d]);c.prototype=b.prototype,a.prototype=new c};try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b=function(){function a(a,b){this.code=a,this.error=b}return a.prototype.getMessage=function(){return"Error #"+this.code.id+": "+this.code.message},a.prototype.getId=function(){return this.code.id},a.prototype.getStackTrace=function(){return this.error&&this.error.stack?this.error.stack:""},a}();a.Exception=b;var c=function(a){function b(){a.apply(this,arguments)}return __extends(b,a),b.XML_PARSE={id:100,message:"XML parsing error"},b.XML_INVALID_SCHEMA={id:101,message:'VAST schema validation error: expected "%s" but found "%s"'},b.UNSUPPORTED_VERSION={id:102,message:"VAST version of response not supported. Expected VAST2 or VAST3 but VAST1 found"},b.TRAFFICKING={id:200,message:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display"},b.LINEARITY={id:201,message:"Video player expecting different linearity"},b.DURATION={id:202,message:"Video player expecting different duration"},b.SIZE={id:203,message:"Video player expecting different size"},b.WRAPPER={id:300,message:"General Wrapper error"},b.WRAPPER_TIMEOUT={id:301,message:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element (URI was either unavailable or reached a timeout as defined by the video player)"},b.WRAPPER_LIMIT={id:302,message:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response"},b.NO_ADS={id:303,message:"No Ads VAST response after one or more Wrappers"},b.NO_MEDIAFILE={id:304,message:"No Mediafile found in VAST file"},b.GENERAL_LINEAR={id:400,message:"General Linear error. Video player is unable to display the Linear Ad."},b.FILE_NOT_FOUND={id:401,message:"File not found. Unable to find Linear/MediaFile from URI."},b.MEDIAFILE_TIMEOUT={id:402,message:"Timeout of MediaFile URI."},b.UNSUPPORTED_MEDIAFILE={id:403,message:"Could not find MediaFile that is supported by this video player, based on the attributes of the MediaFile element."},b.MEDIAFILE_DISPLAY={id:405,message:"Problem displaying MediaFile. Video player found a MediaFile with supported type but could not display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc."},b.GENERAL_NONLINEAR={id:500,message:"General NonLinearAds error."},b.CREATIVE_DIMENSIONS={id:501,message:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)."},b.NONLINEAR_FETCH={id:502,message:"Unable to fetch NonLinearAds/NonLinear resource."},b.SUPPORTED_NONLINEAR_NOT_FOUND={id:503,message:"Could not find NonLinear resource with supported type."},b.GENERAL_COMPANION={id:600,message:"General CompanionAds error."},b.COMPANION_DIMENSIONS={id:601,message:"Unable to display Companion because creative dimensions do not fit within Companion display area (i.e., no available space)."},b.COMPANION_DISPLAY={id:602,message:"Unable to display Required Companion."},b.COMPANION_FETCH={id:603,message:"Unable to fetch CompanionAds/Companion resource."},b.SUPPORTED_COMPANION_NOT_FOUND={id:604,message:"Could not find Companion resource with supported type."},b.UNDEFINED={id:900,message:"Undefined Error"},b.GENERAL={id:901,message:"General VPAID error"},b}(b);a.VastException=c}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){this.error=[],this.click=[],this.pause=[],this.resume=[],this.skip=[],this.creativeView=[],this.start=[],this.firstQuartile=[],this.midpoint=[],this.thirdQuartile=[],this.complete=[],this.impression=[],this.close=[],this.progress=[],this.mute=[],this.unmute=[],this.rewind=[],this.fullscreen=[],this.exitFullscreen=[],this.expand=[],this.collapse=[],this.acceptInvitationLinear=[],this.acceptInvitation=[],this.closeLinear=[],this.noAd=[],this.noLinearAd=[],this.customClicks=[]}return a}();a.TrackingDefinition=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.getXMLDoc=function(a){var b;if(window.DOMParser){var c=new DOMParser;b=c.parseFromString(a,"text/xml")}else b=new ActiveXObject("Msxml2.DOMDocument.3.0"),b.async=!1,b.loadXML(a);return b},a.getNodeContent=function(b){if(b)try{var c=a.getFirstChild(b);return c?a.getNodeTextContent(c):""}catch(d){}},a.getAttributeValue=function(a,b){try{if(a.attributes[b])return String(a.attributes[b].value);for(var c=0;c<a.attributes.length;c++)if(a.attributes[c].name===b)return String(a.attributes[c].value)}catch(d){}},a.isAllWhitespace=function(a){return!/[^\t\n\r ]/.test(a.textContent?a.textContent:a.text)},a.isIgnorable=function(b){return 8===b.nodeType||3===b.nodeType&&a.isAllWhitespace(b)},a.getFirstChild=function(b){for(var c=b.firstChild;c;){if(!a.isIgnorable(c))return c;c=c.nextSibling}return null},a.getNodeTextContent=function(a){var b=a.textContent?a.textContent:a.text,c=b.replace(/[\t\n\r ]+/g," ");return" "===c.charAt(0)&&(c=c.substring(1,c.length))," "===c.charAt(c.length-1)&&(c=c.substring(0,c.length-1)),c},a}();a.XMLHelper=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(){this.version=2,this.tracking=new a.TrackingDefinition,this.clickThrough=[],this.mediaFiles=[],this.title="",this.wrappers=[],this.skippable=!1,this.skipDelay=0,this.extensions=[]}return b.prototype.merge=function(a){this.version<a.version&&(this.version=a.version),!this.title&&a.title&&(this.title=a.title),!this.adSystem&&a.adSystem&&(this.adSystem=a.adSystem),!this.id&&a.id&&(this.id=a.id),!this.duration&&a.duration&&(this.duration=a.duration),!this.adParameters&&a.adParameters&&(this.adParameters=a.adParameters),a.adTagUri&&this.wrappers.push(a.adTagUri);var b,c;for(var d in a.tracking)for(b=0,c=a.tracking[d].length;c>b;b++)this.tracking[d].push(a.tracking[d][b]);for(b=0,c=a.mediaFiles.length;c>b;b++)this.mediaFiles.push(a.mediaFiles[b]);for(b=0,c=a.clickThrough.length;c>b;b++)this.clickThrough.push(a.clickThrough[b]);for(b=0,c=a.extensions.length;c>b;b++)this.extensions.push(a.extensions[b]);!this.skippable&&a.skippable&&(this.skippable=!0,this.skipDelay=a.skipDelay)},b}();a.LinearAd=b}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function b(){}return b.execCallback=function(c,d,e){try{c.apply(c,d)}catch(f){var g=new a.Logger("Callback"),h="user callback threw an exception: "+f;if(g.error(h,f,c,d),e){var i=a.VastException.UNDEFINED;i.message=h,b.execCallback(e,[new a.VastException(i,f)])}}},b}();b.CallbackHelper=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){}return c.parse=function(c,d,e){try{var f=b.XMLHelper.getXMLDoc(c),g=f.documentElement;if(!g)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);var h=g.getElementsByTagName("Ad")[0];if(!h)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_ADS)]);var i=new b.LinearAd;if(i.version=Number(b.XMLHelper.getAttributeValue(g,"version")),i.version<2)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNSUPPORTED_VERSION)]);var j=!!h.getElementsByTagName("Wrapper").length,k=h.getElementsByTagName("Linear")[0];if(!j&&!k)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.LINEARITY)]);i.id=b.XMLHelper.getAttributeValue(h,"id"),i.adTagUri=b.XMLHelper.getNodeContent(h.getElementsByTagName("VASTAdTagURI")[0]),i.title=b.XMLHelper.getNodeContent(h.getElementsByTagName("AdTitle")[0]),i.adSystem=b.XMLHelper.getNodeContent(h.getElementsByTagName("AdSystem")[0]);for(var l=h.getElementsByTagName("ClickThrough"),m=0,n=l.length;n>m;m++)i.clickThrough.push(b.XMLHelper.getNodeContent(l[m]));for(var o=h.getElementsByTagName("Impression"),m=0,n=o.length;n>m;m++)i.tracking.impression.push({url:b.XMLHelper.getNodeContent(o[m]),data:null});var p=h.getElementsByTagName("ClickTracking");for(m=0,n=p.length;n>m;m++)i.tracking.click.push({url:b.XMLHelper.getNodeContent(p[m]),data:null});var q=h.getElementsByTagName("Error");for(m=0,n=q.length;n>m;m++)i.tracking.error.push({url:b.XMLHelper.getNodeContent(q[m]),data:null});if(k){var r=a.Utils.seconds(b.XMLHelper.getAttributeValue(k,"skipoffset"));i.skippable=!isNaN(r),i.skipDelay=r||0,i.duration=a.Utils.seconds(b.XMLHelper.getNodeContent(k.getElementsByTagName("Duration")[0])),i.adParameters=b.XMLHelper.getNodeContent(k.getElementsByTagName("AdParameters")[0]);var s=k.getElementsByTagName("Tracking");for(m=0,n=s.length;n>m;m++){var t=b.XMLHelper.getAttributeValue(s[m],"event");if(i.tracking.hasOwnProperty(t)){var u=null;if("progress"===t)if(u=b.XMLHelper.getAttributeValue(s[m],"offset"),u.indexOf(":")>0)u=a.Utils.seconds(u);else{var v=a.StringHelper.trim(u).match(/^([0-9\.]+)%$/);if(!v)return b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNDEFINED,new Error("Wrong offset for progress tracking: "+u))]);u=i.duration*Number(v[1])/100}i.tracking[t].push({url:b.XMLHelper.getNodeContent(s[m]),data:u})}}var w=k.getElementsByTagName("MediaFile");for(m=0,n=w.length;n>m;m++){var x=w[m];i.mediaFiles.push({type:b.XMLHelper.getAttributeValue(x,"type"),url:b.XMLHelper.getNodeContent(x),width:Number(b.XMLHelper.getAttributeValue(x,"width")),height:Number(b.XMLHelper.getAttributeValue(x,"height")),delivery:b.XMLHelper.getAttributeValue(x,"delivery"),bitrate:Number(b.XMLHelper.getAttributeValue(x,"bitrate")),api:b.XMLHelper.getAttributeValue(x,"apiFramework"),scalable:!!b.XMLHelper.getAttributeValue(x,"scalable"),id:b.XMLHelper.getAttributeValue(x,"id"),minBitrate:Number(b.XMLHelper.getAttributeValue(x,"minBitrate")),maxBitrate:Number(b.XMLHelper.getAttributeValue(x,"maxBitrate")),maintainAspectRatio:!!b.XMLHelper.getAttributeValue(x,"maintainAspectRatio"),codec:b.XMLHelper.getAttributeValue(x,"codec")})}}var y=h.getElementsByTagName("Extension");for(m=0,n=y.length;n>m;m++)i.extensions.push({type:b.XMLHelper.getAttributeValue(y[m],"type"),content:b.XMLHelper.getNodeContent(y[m])});b.CallbackHelper.execCallback(d,[i],e)}catch(z){b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.XML_PARSE,z)])}},c}();b.VASTParser=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.asset={corsswf:"cors.swf"}}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){}return c.load=function(d,e,f,g,h){var i=this;void 0===h&&(h=!0),d=c.updateUrlPlaceholder(d),this.logger.info("Loading VAST file URL:",d," - credentials:",h);var j=function(){if(h)return i.logger.warn("load file with credentials failed, try without credentials before flash proxy"),void c.load(d,e,f,g,!1);if(i.logger.warn("load file with javascript failed"),a.Utils.hasFlash())c.loadWithFlash(d,e,f,g);else{var j=a.VastException.UNDEFINED;j.message="Could not load with SWF proxy, no flash plugin installed",i.logger.warn(j.message,d),b.CallbackHelper.execCallback(g,[new a.VastException(j)])}};try{var k=a.Request.createXmlHttpRequest();k.open("GET",d,!0),k.withCredentials=h;var l=function(){l=function(){};var b;if("string"==typeof k.responseXML)b=k.responseXML;else if("string"==typeof k.responseText)b=k.responseText;else{if("string"!=typeof k.response)return void j();b=k.response}f(a.StringHelper.trim(b))};k instanceof XMLHttpRequest?k.onreadystatechange=function(){if(4===k.readyState){if(k.status<200||k.status>=400)return i.logger.warn("server return an invalid status code "+k.status),j();l()}}:(k.onerror=j,k.ontimeout=j,k.onprogress=function(){},k.timeout=5e3,k.onload=l),k.send()}catch(m){this.logger.warn("Could not load XML file directly",m),this.logger.info("Retrying with a SWF helper in case there are just CORS headers missing"),j()}},c.loadWithFlash=function(c,d,e,f){var g=this,h="vastloader_"+Date.now()+"_"+Math.round(1e3*Math.random());this.logger.info("try loading file with flash cors proxy",h),window[h]=function(d,i){d?(g.logger.info("Flash CORS proxy successfully load VAST file",c),b.CallbackHelper.execCallback(e,[a.StringHelper.trim(decodeURIComponent(i))],f)):(g.logger.error("Unable to load VAST file with flash CORS proxy"),b.CallbackHelper.execCallback(f,[new a.VastException(a.VastException.WRAPPER_TIMEOUT)])),window[h]=void 0};var i=d.assetsUrl+"/"+b.asset.corsswf,j=document.createElement("div");j.innerHTML='<object id="'+h+'" name="'+h+'" data="'+i+'" type="application/x-shockwave-flash" width="0" height="0"><param name="allowScriptAccess" value="always"/><param name="movie" value="'+i+'"/><param name="flashvars" value="url='+encodeURIComponent(c)+"&handler="+h+'"/></object>',document.body.appendChild(j)},c.updateUrlPlaceholder=function(b){try{return b.replace(/\[timestamp\]/gi,String(Date.now())).replace(/\[(random|cachebusting|random_number)\]/gi,a.StringHelper.rand(8))}catch(c){this.logger.warn("updateUrlPlaceholder threw an exception: "+c)}return b},c.logger=new a.Logger("vast.VASTLoader"),c}();b.VASTLoader=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(c){this.config=c,this.logger=new a.Logger("vast.VASTLib"),this.definition=new b.LinearAd,this.logger.info("new",this)}return c.prototype.load=function(a,c,d){var e=this;this.definition.url||(this.definition.url=a),b.VASTLoader.load(a,this.config,function(a){e.parse(a,c,d)},function(c){e.logger.error("Could not load XML file",a,e.definition.url,c),b.CallbackHelper.execCallback(d,[c])})},c.prototype.parse=function(c,d,e){var f=this;b.VASTParser.parse(c,function(g){try{f.definition.merge(g),g.adTagUri?f.load(g.adTagUri,d,e):0===g.mediaFiles.length?(f.logger.error("No media files found"),b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.NO_MEDIAFILE)])):b.CallbackHelper.execCallback(d,[f.definition],e)}catch(h){f.logger.error("Could not parse XML string",c,h),b.CallbackHelper.execCallback(e,[new a.VastException(a.VastException.UNDEFINED,h)])}},e)},c.prototype.parseJSON=function(a,b,c){this.logger.error("JSON parser is not implemented yet")},c}();b.VASTLib=c}(b=a.vast||(a.vast={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(a,b){void 0===b&&(b=null),this.type=a,this.data=b}return a.AdLoaded="AdLoaded",a.AdStarted="AdStarted",a.AdStopped="AdStopped",a.AdSkipped="AdSkipped",a.AdLinearChange="AdLinearChange",a.AdSizeChange="AdSizeChange",a.AdExpandedChange="AdExpandedChange",a.AdSkippableStateChange="AdSkippableStateChange",a.AdRemainingTimeChange="AdRemainingTimeChange",a.AdDurationChange="AdDurationChange",a.AdVolumeChange="AdVolumeChange",a.AdImpression="AdImpression",a.AdVideoStart="AdVideoStart",a.AdVideoFirstQuartile="AdVideoFirstQuartile",a.AdVideoMidpoint="AdVideoMidpoint",a.AdVideoThirdQuartile="AdVideoThirdQuartile",a.AdVideoComplete="AdVideoComplete",a.AdClickThru="AdClickThru",a.AdInteraction="AdInteraction",a.AdUserAcceptInvitation="AdUserAcceptInvitation",a.AdUserMinimize="AdUserMinimize",a.AdUserClose="AdUserClose",a.AdPaused="AdPaused",a.AdPlaying="AdPlaying",a.AdLog="AdLog",a.AdError="AdError",a}();a.VPAIDEvent=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.UNLOADED=-1]="UNLOADED",a[a.READY=0]="READY",a[a.LOADING=1]="LOADING",a[a.LOADED=2]="LOADED"}(a.LoaderStatus||(a.LoaderStatus={}));a.LoaderStatus}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function b(b,c){this.container=b,this.config=c,this.loadTimeout=8e3,this.logger=new a.Logger("vpaid.BaseVPAIDContainer"),this.id=c.id||a.StringHelper.rand(20,!1)}return b.prototype.destroy=function(){try{!this.isDetroyed&&this.creativeContainer?(this.isDetroyed=!0,this.creativeContainer.parentNode.removeChild(this.creativeContainer),
this.creativeContainer=null,this.vpaid=null):this.isDetroyed&&this.logger.error("Cannot call destroy twice !")}catch(a){this.logger.error("unable to remove VPAID creative container: "+a)}},b.prototype.getVPAID=function(){return this.vpaid},b}();b.BaseVPAIDContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype.loadVpaid=function(b,c,d){var e=this;this.mainContainer=document.createElement("div"),this.mainContainer.style.position="relative",this.container.appendChild(this.mainContainer),this.creativeContainer=a.HTMLHelper.createIframe(),this.creativeContainer.id="vpaid-"+this.id,this.mainContainer.appendChild(this.creativeContainer);var f=!0,g=function(a){f&&(f=!1,d(a))},h=a.HTMLHelper.getWindow(this.mainContainer);this.callbackName="vpaidjsload_"+this.id,h[this.callbackName]=function(a){if(h[e.callbackName]=function(){},a)try{return e.creativeContainer=h.document.getElementById("vpaid-"+e.id),e.vpaid=e.creativeContainer.contentWindow.getVPAIDAd(),f=!1,void c(e.vpaid)}catch(d){g("VPAIDJS getVPAIDAd throw an exception "+d)}else g("Unable to load VPAID "+b);e.destroy()};var i='<!DOCTYPE html><html><body style="margin:0px;padding:0px;overflow:hidden"><script type="text/javascript" async>var target = window.parent;var script = document.createElement("script");script.onload = function() { target["'+this.callbackName+'"](true);};script.onerror = function() { target["'+this.callbackName+'"](false);};script.src="'+b+'";script.async=true;document.body.appendChild(script);</script><div id="video-container" style="position:absolute;top:0px;left:0px;z-index:1;background-color=#000000"><video></video></div><div id="vpaid-container" style="position:absolute;top:0px;left:0px;z-index:2"></div></body></html>';this.creativeContainer.contentWindow.document.write(i),this.creativeContainer.contentWindow.document.close(),this.vpaidContainer=this.creativeContainer.contentWindow.document.getElementById("vpaid-container"),this.videoContainer=this.creativeContainer.contentWindow.document.getElementById("video-container"),setTimeout(function(){g("Timeout error, creative takes too much time to load")},this.loadTimeout)},d.prototype.getEnvironmentVars=function(a){if(!this.environmentVars){var b=this.vpaidContainer,c={slot:b,videoSlot:this.videoContainer.getElementsByTagName("video")[0],videoSlotCanAutoPlay:!0};a||(a=c);for(var d in c)a[d]||(a[d]=c[d]);this.environmentVars=a,this.environmentVars.slot!==b&&(this.mainContainer.style.display="none")}return this.environmentVars},d.prototype.destroy=function(){c.prototype.destroy.call(this),this.mainContainer&&this.mainContainer.parentNode&&(this.mainContainer.parentNode.removeChild(this.mainContainer),this.mainContainer=null,this.videoContainer=null)},d.prototype.resize=function(a,b){if(this.currentWidth=a,this.currentHeight=b,this.mainContainer&&(this.mainContainer.style.width=a+"px",this.mainContainer.style.height=b+"px"),this.creativeContainer&&(this.creativeContainer.style.width=a+"px",this.creativeContainer.style.height=b+"px"),this.videoContainer){this.videoContainer.style.width=a+"px",this.videoContainer.style.height=b+"px";var c=this.videoContainer.getElementsByTagName("video")[0];c&&(c.videoWidth=a,c.videoHeight=b,c.width=a,c.height=b,c.style.width=a+"px",c.style.height=b+"px")}},d.prototype.getType=function(){return b.CreativeType.JS},d.prototype.registerVPAIDEventHandler=function(a){for(var c in b.VPAIDEvent)this.vpaid.subscribe(b.VPAIDHelper.createVPAIDEventCallback(a,c),c,this)},d}(b.BaseVPAIDContainer);b.VPAIDJSContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.asset={vpaidswfwrapper:"vpaidwrapper.swf",sandbox:"vpaid-sandbox.html"}}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments)}return __extends(d,c),d.prototype.loadVpaid=function(c,d,e){var f=this;if(!a.Utils.hasFlash())return e("Flash plugin is not installed !");var g=!0,h=function(a){g&&(g=!1,f.destroy(),e(a))};this.callbackName="handleVPAIDEvent"+this.id,this.window=a.HTMLHelper.getWindow(this.container),this.window[this.callbackName]=function(a){return f.window[f.callbackName]=function(){},"ready"===a.type?(f.vpaid=f.creativeContainer,g=!1,void d(f.vpaid)):void(a.type===b.VPAIDEvent.AdError&&h(a.data))};var i="vpaid-"+this.id,j=this.config.path+"/"+b.asset.vpaidswfwrapper;this.container.innerHTML='<object data="'+j+'" type="application/x-shockwave-flash" name="'+i+'" id="'+i+'" style="border:0px;width:100%;height:1px;margin:0px;padding:0px" width="100%" height="100%"><param name="id" value="'+i+'" /><param name="name" value="'+i+'" /><param name="movie" value="'+j+'" /><param name="bgcolor" value="#000000" /><param name="quality" value="high" /><param name="allowFullScreen" value="true" /><param name="allowScriptAccess" value="always" /><param name="wmode" value="transparent" /><param name="flashvars" value="debug='+this.config.debug+"&eventHandler="+this.callbackName+"&url="+encodeURIComponent(c)+'" /></object>',this.creativeContainer=this.window.document.getElementById(i),setTimeout(function(){h("Timeout error, creative takes too much time to load")},this.loadTimeout)},d.prototype.destroy=function(){c.prototype.destroy.call(this),this.window[this.callbackName]=function(){}},d.prototype.registerVPAIDEventHandler=function(a){this.window[this.callbackName]=a},d.prototype.resize=function(){},d.prototype.getEnvironmentVars=function(a){return{slot:this.creativeContainer,videoSlot:null,videoSlotCanAutoPlay:!0}},d.prototype.getType=function(){return b.CreativeType.SWF},d}(b.BaseVPAIDContainer);b.VPAIDSWFContainer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.prototype.getVPAID=function(){return this},a.prototype.initAd=function(a,b,c,d,e,f){this.vpaidguard("initAd",[a,b,c,d,e,f])},a.prototype.skipAd=function(){this.vpaidguard("skipAd")},a.prototype.resizeAd=function(a,b,c){this.vpaidguard("resizeAd",[a,b,c])},a.prototype.handshakeVersion=function(a){return this.vpaidguard("handshakeVersion",[a])},a.prototype.startAd=function(){this.vpaidguard("startAd",[])},a.prototype.stopAd=function(){this.vpaidguard("stopAd",[])},a.prototype.pauseAd=function(){this.vpaidguard("pauseAd",[])},a.prototype.resumeAd=function(){this.vpaidguard("resumeAd",[])},a.prototype.expandAd=function(){this.vpaidguard("expandAd",[])},a.prototype.collapseAd=function(){this.vpaidguard("collapseAd",[])},a.prototype.getAdLinear=function(){return this.vpaidguard("getAdLinear",[])},a.prototype.getAdWidth=function(){return this.vpaidguard("getAdWidth",[])},a.prototype.getAdHeight=function(){return this.vpaidguard("getAdHeight",[])},a.prototype.getAdExpanded=function(){return this.vpaidguard("getAdExpanded",[])},a.prototype.getAdSkippableState=function(){return this.vpaidguard("getAdSkippableState",[])},a.prototype.getAdRemainingTime=function(){return this.vpaidguard("getAdRemainingTime",[])},a.prototype.getAdDuration=function(){return this.vpaidguard("getAdDuration",[])},a.prototype.getAdVolume=function(){return this.vpaidguard("getAdVolume",[])},a.prototype.getAdCompanions=function(){return this.vpaidguard("getAdCompanions",[])},a.prototype.getAdIcons=function(){return this.vpaidguard("getAdIcons",[])},a.prototype.setAdVolume=function(a){return this.vpaidguard("setAdVolume",[a])},a.prototype.subscribe=function(a,b,c){this.vpaidguard("subscribe",[a,b,c])},a.prototype.unsubscribe=function(a,b){this.vpaidguard("unsubscribe",[a,b])},a.prototype.setVPAID=function(a){this.vpaid=a},a.prototype.vpaidguard=function(a,b){void 0===b&&(b=[]);try{return this.callVPAIDMethod(a,b)}catch(c){}},a.prototype.callVPAIDMethod=function(a,b){return void 0===b&&(b=[]),this.vpaid[a].apply(this.vpaid,b)},a}();a.VPAIDJSGuard=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(a,b,c){void 0===c&&(c="*"),this.currentWindow=a,this.targetWindow=b,this.domain=c}return c.prototype.setClientCallback=function(a){var b=this;this.setCallback(function(c){var d=b.parseEvent(c);a(d)})},c.prototype.setServerCallback=function(a){var b=this;this.setCallback(function(c){a(b.parse(c))})},c.prototype.removeCallback=function(){this.currentWindow.removeEventListener("message",this.callback,!1)},c.prototype.dispatchEvent=function(a,b){this.post(this.targetWindow,this.stringify(a,b))},c.prototype.callMethod=function(a,b){this.post(this.targetWindow,this.stringify(a,b))},c.prototype.parseEvent=function(a){var c=this.parse(a);return new b.VPAIDEvent(c.name,c.data)},c.prototype.post=function(a,b){a.postMessage(b,this.domain)},c.prototype.stringify=function(b,d){var e=b+c.splitChar+(void 0!==d?a.Base64.encode(JSON.stringify(d)):"");return e},c.prototype.parse=function(b){var d,e=b.data.split(c.splitChar),f=e[0];return e[1]&&(d=JSON.parse(a.Base64.decode(e[1]))),{name:f,data:d}},c.prototype.setCallback=function(a){var b=this;this.callback=function(c){c.source===b.targetWindow&&"string"==typeof c.data&&a(c)},this.currentWindow.addEventListener("message",this.callback,!1)},c.splitChar="_",c}();b.PostMessage=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(d,e){var f=this;this.container=d,this.assetPath=e,this.logger=new a.Logger("vpaid.PostMessageServer"),this.timerDelay=250,this.logger.info("Init postMessageAPI",d),this.window=window,this.postMessage=new b.PostMessage(window,window.parent),this.postMessage.setServerCallback(function(a){f.callMethod(a.name,a.data)}),this.postMessage.dispatchEvent(c.READY_EVENT),this.logger.info("End Init postMessageAPI",d,window,window.parent)}return c.prototype.callMethod=function(a,d){switch(this.logger.info("call method "+a,d),a){case b.PostMessageClient.LOADVPAID_METHOD:return this.loadVpaid(d[0]);case b.PostMessageClient.SETCONFIG_METHOD:this.config=d[0],this.logger.info("Received configuration Object",this.config),this.config.sandbox=!1,this.config.path=this.assetPath,this.postMessage.dispatchEvent(c.CONFIGREADY_EVENT);break;default:this.callVPAIDMethod(a,d)}},c.prototype.callVPAIDMethod=function(a,c){try{return this.vpaid[a].apply(this.vpaid,c)}catch(d){var e="Error calling methog "+a+"("+c+")";this.postMessage.dispatchEvent(b.VPAIDEvent.AdLog,e),this.logger.error(e)}},c.prototype.loadVpaid=function(a){var d=this,e=new b.VPAIDLoader(this.container,this.config);e.load(a,function(a){d.logger.info("VPAID Loaded !",a),d.vpaid=a;var e=function(a){return function(){for(var c=[],e=0;e<arguments.length;e++)c[e-0]=arguments[e];a===b.VPAIDEvent.AdStopped&&clearInterval(d.timerId),d.postMessage.dispatchEvent(a,c)}};for(var f in b.VPAIDEvent)d.vpaid.subscribe(e(f),f);d.postMessage.dispatchEvent(c.VPAIDLOADED_EVENT),d.sendGettersValues(),d.timerId=setInterval(function(){d.sendGettersValues()},d.timerDelay)},function(a){var b="PostMessageServer : Unable to load VPAID "+a;d.postMessage.dispatchEvent(c.VPAIDLOADEDERROR_EVENT,[b]),d.logger.error(b)})},c.prototype.sendGettersValues=function(){var a=this,d={};b.PostMessageClient.getters.forEach(function(b){d[b]=a.callVPAIDMethod(b,[])}),this.postMessage.dispatchEvent(c.ATTRIBUTE_EVENT,d)},c.READY_EVENT="ready",c.CONFIGREADY_EVENT="configReady",c.VPAIDLOADED_EVENT="vpaidLoaded",c.VPAIDLOADEDERROR_EVENT="vpaidLoadedError",c.ATTRIBUTE_EVENT="attributes",c}();b.PostMessageServer=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(a){function b(b){a.call(this),this.postMessage=b}return __extends(b,a),b.prototype.handshakeVersion=function(a){return"2.0"},b.prototype.initAd=function(a,b,c,d,e,f){void 0===e&&(e="");var g="object"==typeof e?JSON.stringify(e):e;this.callVPAIDMethod("initAd",[a,b,c,d,g])},b.prototype.subscribe=function(a,b,c){this.postMessage.subscribe(a,b,c)},b.prototype.unsubscribe=function(a,b){this.postMessage.unsubscribe(a,b)},b.prototype.callVPAIDMethod=function(a,b){void 0===b&&(b=[]),this.postMessage.callVPAIDMethod(a,b)},b}(a.VPAIDJSGuard);a.PostMessageVPAID=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){this.listeners={},this.listenersScope={}}return c.prototype.subscribe=function(a,b,c){this.listeners[b]=this.listeners[b]||[],this.listeners[b].push(a),this.listenersScope[b]=this.listenersScope[b]||[],this.listenersScope[b].push(c?c:null)},c.prototype.unsubscribe=function(b,c){var d=this.listeners[c],e=a.ArrayHelper.indexOf(d,b);d&&e>=0&&(d[e]=function(){})},c.prototype.clearListeners=function(){this.listeners={},this.listenersScope={}},c.prototype.handleEvent=function(a,c){for(var d=this.listeners[a.type]||[],e=0,f=d.length;f>e;e++)try{var g=[];if(a.data)switch(a.type){case b.VPAIDEvent.AdClickThru:g=[a.data.url,a.data.id,a.data.playerHandles];break;case b.VPAIDEvent.AdLog:case b.VPAIDEvent.AdError:g=[a.data];break;case b.VPAIDEvent.AdInteraction:g=[a.data.id]}d[e].apply(this.listenersScope[a.type][e],g)}catch(h){if(c)throw"failed to log error on callback: "+a.data;this.handleEvent({type:b.VPAIDEvent.AdLog,data:"Callback #"+e+" on event "+a.type+" throws an exception: "+h},!0)}},c}();b.EventHandler=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(c,d){this.container=c,this.config=d,this.timeout=5e3,this.vpaidAttribute={},this.logger=new a.Logger("vpaid.PostMessageClient"),this.eventHandler=new b.EventHandler,this.mainContainer=document.createElement("div"),this.mainContainer.style.position="relative",c.appendChild(this.mainContainer),this.iframeContainer=a.HTMLHelper.createIframe(),this.mainContainer.appendChild(this.iframeContainer),this.postMessage=new b.PostMessage(window,this.iframeContainer.contentWindow)}return c.prototype.initAPI=function(a,d,e){var f=this;this.logger.info("init iframe API on url "+a);var g,h=function(a){a.type===b.PostMessageServer.READY_EVENT?(f.logger.info("Got ready event from server !"),f.postMessage.callMethod(c.SETCONFIG_METHOD,[f.config])):a.type===b.PostMessageServer.CONFIGREADY_EVENT&&(f.logger.info("Received configuration ready form server"),f.postMessage.removeCallback(),f.apiReady=!0,clearTimeout(g),d())};this.postMessage.setClientCallback(h),this.iframeContainer.src=a,g=setTimeout(function(){if(!f.apiReady){f.postMessage.removeCallback();var b="server "+a+" didn't reply after "+f.timeout+"ms";e(b),f.logger.error(b)}},this.timeout)},c.prototype.loadVpaid=function(a,d,e){var f=this;this.logger.info("Request load VPAID "+a);var g;if(!this.apiReady){var h="API is not ready, before use loadVpaid, you must init the API with the method initAPI";return this.logger.error(h),e(h)}var i=function(a){return a.type===b.PostMessageServer.VPAIDLOADED_EVENT?(f.logger.info("received VPAID loaded from server!"),f.postMessage.removeCallback(),clearTimeout(g),f.onVpaidLoaded(d)):a.type===b.PostMessageServer.VPAIDLOADEDERROR_EVENT?(clearTimeout(g),e(a.data)):void 0};this.postMessage.setClientCallback(i),g=setTimeout(function(){f.postMessage.removeCallback();var b="Timeout Error : Unable to load vpaid "+a+", server did not reply after "+f.timeout+"ms";e(b),f.logger.error(b)},this.timeout),this.postMessage.callMethod(c.LOADVPAID_METHOD,[a])},c.prototype.getVPAID=function(){return this.vpaid},c.prototype.callVPAIDMethod=function(a,b){return void 0===b&&(b=[]),c.getters.indexOf(a)>=0?this.vpaidAttribute[a]:this.postMessage.callMethod(a,b)},c.prototype.getIframeContainer=function(){return this.iframeContainer},c.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},c.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},c.prototype.onVpaidLoaded=function(a){var c=this;this.vpaid=new b.PostMessageVPAID(this),this.postMessage.setClientCallback(function(a){return a.type===b.PostMessageServer.ATTRIBUTE_EVENT?void(c.vpaidAttribute=a.data):void c.eventHandler.handleEvent(a)}),a(this.vpaid)},c.GETATTRIBUTESVALUES_METHOD="getAttributesValues",c.LOADVPAID_METHOD="loadVpaid",c.SETCONFIG_METHOD="setConfig",c.getters=["getAdWidth","getAdHeight","getAdDuration","getAdRemainingTime","getAdSkippableState","getAdLinear","getAdExpanded","getAdVolume"],c}();b.PostMessageClient=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.loadVpaid=function(b,c,d){var e=this,f=new a.PostMessageClient(this.container,this.config);this.creativeContainer=f.getIframeContainer();var g=this.config.sandboxUrl||this.config.path+"/"+a.asset.sandbox;f.initAPI(g,function(){f.loadVpaid(b,function(a){e.vpaid=a,c(a)},d)},d)},c.prototype.getType=function(){return a.CreativeType.POSTMESSAGE},c}(a.VPAIDJSContainer);a.PostMessageContainer=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(){}return b.isVPAID2=function(a){return Number(a.handshakeVersion("2.0"))>=2},b.createVPAIDEventCallback=function(b,c){return function(){for(var d=[],e=0;e<arguments.length;e++)d[e-0]=arguments[e];var f=d[0];switch(c){case a.VPAIDEvent.AdClickThru:f={url:d[0],id:d[1],playerHandles:d[2]}}b({type:c,data:f})}},b}();a.VPAIDHelper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.REMOVED=-6]="REMOVED",a[a.REMOVING=-5]="REMOVING",a[a.ERROR=-4]="ERROR",a[a.STOPPED=-3]="STOPPED",a[a.STOPPING=-2]="STOPPING",a[a.SKIPPED=-1]="SKIPPED",a[a.SKIPPING=0]="SKIPPING",a[a.READY=1]="READY",a[a.LOADING=2]="LOADING",a[a.LOADED=3]="LOADED",a[a.STARTING=5]="STARTING",a[a.STARTED=6]="STARTED",a[a.PAUSED=7]="PAUSED",a[a.PLAYING=8]="PLAYING",a[a.COMPLETE=9]="COMPLETE"}(a.VpaidStatus||(a.VpaidStatus={}));a.VpaidStatus}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.SWF=1]="SWF",a[a.JS=2]="JS",a[a.POSTMESSAGE=3]="POSTMESSAGE"}(a.CreativeType||(a.CreativeType={}));a.CreativeType}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(c){function d(){c.apply(this,arguments),this.status=b.VpaidStatus.READY,this.type=b.CreativeType.JS,this.eventHandler=new b.EventHandler}return __extends(d,c),d.prototype.initAd=function(d,e,f,g,h,i){var j=this;if(void 0===h&&(h=""),this.status>=b.VpaidStatus.LOADING)return void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"Cannot call initAd() twice, VPAID already initalized");this.status=b.VpaidStatus.LOADING;var k=8e3;setTimeout(function(){j.status<b.VpaidStatus.LOADED&&j.dispatchEvent(b.VPAIDEvent.AdError,"Creative did not initiated after "+k+"ms")},k),this.environmentVars=i,c.prototype.initAd.call(this,d,e,f,g,h,i)},d.prototype.startAd=function(){var d=this;if(this.status<b.VpaidStatus.LOADED)return void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"VPAID not started, use initAd(), and wait for AdLoaded event before call startAd() method");if(this.status>=b.VpaidStatus.STARTING)return void this.dispatchEvent(a.vpaid.VPAIDEvent.AdLog,"cannot call startAd() twice, already started");this.status=b.VpaidStatus.STARTING;var e=8e3;setTimeout(function(){d.status<b.VpaidStatus.STARTED&&d.dispatchEvent(b.VPAIDEvent.AdError,"Creative did not start after "+e+"ms")},e),c.prototype.startAd.call(this)},d.prototype.stopAd=function(){var a=this;this.status>b.VpaidStatus.STOPPING&&(this.status=b.VpaidStatus.STOPPING,setTimeout(function(){a.status>b.VpaidStatus.STOPPED&&(a.dispatchEvent(b.VPAIDEvent.AdLog,"Creative did not stop after 1s, force stop !"),a.dispatchEvent(b.VPAIDEvent.AdStopped))},1e3),c.prototype.stopAd.call(this))},d.prototype.skipAd=function(){var a=this;this.getAdSkippableState()&&this.status>b.VpaidStatus.SKIPPING&&(this.status=b.VpaidStatus.SKIPPING,setTimeout(function(){a.status>=b.VpaidStatus.SKIPPING&&(a.dispatchEvent(b.VPAIDEvent.AdLog,"Creative did not skip after 1s, force skip !"),a.dispatchEvent(b.VPAIDEvent.AdSkipped),a.stopAd())},1e3),c.prototype.skipAd.call(this))},d.prototype.subscribe=function(a,b,c){this.eventHandler.subscribe(a,b,c)},d.prototype.unsubscribe=function(a,b){this.eventHandler.unsubscribe(a,b)},d.prototype.vpaidguard=function(a,c){void 0===c&&(c=[]);try{if(this.status!==b.VpaidStatus.REMOVED)return this.callVPAIDMethod(a,c)}catch(d){switch(a){case"initAd":case"startAd":case"resizeAd":this.dispatchEvent(b.VPAIDEvent.AdError,"error call "+a+": "+d);break;default:this.dispatchEvent(b.VPAIDEvent.AdLog,"error call "+a+": "+d)}}},d.prototype.dispatchEvent=function(a,c){return this.handleVpaidEvent(new b.VPAIDEvent(a,c))},d.prototype.handleVpaidEvent=function(a){if(this.status!==b.VpaidStatus.REMOVED){if(this.status>b.VpaidStatus.STOPPED)switch(a.type){case b.VPAIDEvent.AdLoaded:this.status=b.VpaidStatus.LOADED;break;case b.VPAIDEvent.AdStarted:this.status=b.VpaidStatus.STARTED;break;case b.VPAIDEvent.AdVideoStart:case b.VPAIDEvent.AdPlaying:this.status=b.VpaidStatus.PLAYING;break;case b.VPAIDEvent.AdPaused:this.status=b.VpaidStatus.PAUSED;break;case b.VPAIDEvent.AdVideoComplete:this.status=b.VpaidStatus.COMPLETE;break;case b.VPAIDEvent.AdSkipped:this.status=b.VpaidStatus.SKIPPED;break;case b.VPAIDEvent.AdStopped:this.status=b.VpaidStatus.STOPPED}this.eventHandler.handleEvent(a),a.type===b.VPAIDEvent.AdError&&this.stopAd()}},d}(b.VPAIDJSGuard);b.BaseVPAIDJSWrapper=c}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(c){var d=this;b.call(this),this.lastAdRemainingTime=-1,this.setVPAID(c.getVPAID()),this.type=c.getType(),this.container=c,this.container.registerVPAIDEventHandler(function(b){switch(b.type){case a.VPAIDEvent.AdRemainingTimeChange:case a.VPAIDEvent.AdDurationChange:return}d.handleVpaidEvent(b)})}return __extends(c,b),c.prototype.initAd=function(c,d,e,f,g,h){this.container.resize(c,d),this.type===a.CreativeType.JS&&"string"==typeof g&&(g={AdParameters:g}),b.prototype.initAd.call(this,c,d,e,f,g,this.type===a.CreativeType.JS?this.getEnvironmentVars(h):null)},c.prototype.resizeAd=function(a,c,d){this.isResizing=!0,this.container.resize(a,c),b.prototype.resizeAd.call(this,a,c,d)},c.prototype.getEnvironmentVars=function(a){return this.container.getEnvironmentVars(a)},c.prototype.handleVpaidEvent=function(c){var d=this;switch(c.type){case a.VPAIDEvent.AdSizeChange:this.isResizing||this.container.resize(this.getAdWidth(),this.getAdHeight()),this.isResizing=!1;break;case a.VPAIDEvent.AdStarted:this.startTimer();break;case a.VPAIDEvent.AdStopped:this.stopTimer()}b.prototype.handleVpaidEvent.call(this,c),c.type===a.VPAIDEvent.AdSkipped&&this.stopAd(),this.status===a.VpaidStatus.STOPPED&&(this.status=a.VpaidStatus.REMOVING,setTimeout(function(){d.status=a.VpaidStatus.REMOVED,d.container.destroy()},250))},c.prototype.startTimer=function(){var b=this;this.timerId||(this.timerId=setInterval(function(){b.getAdRemainingTime()>=0&&b.lastAdRemainingTime!==b.getAdRemainingTime()&&(b.lastAdRemainingTime=b.getAdRemainingTime(),b.dispatchEvent(a.VPAIDEvent.AdRemainingTimeChange),b.dispatchEvent(a.VPAIDEvent.AdDurationChange))},250))},c.prototype.stopTimer=function(){this.timerId&&clearInterval(this.timerId)},c}(a.BaseVPAIDJSWrapper);a.VPAIDWrapper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(c){b.call(this,c),this.adDuration=-2,this.isVpaid2=a.VPAIDHelper.isVPAID2(this.vpaid)}return __extends(c,b),c.prototype.handshakeVersion=function(a){return"2.0"},c.prototype.initAd=function(a,c,d,e,f,g){this.adWidth=a,this.adHeight=c,b.prototype.initAd.call(this,a,c,d,e,f,g)},c.prototype.resizeAd=function(c,d,e){return this.isVpaid2?b.prototype.resizeAd.call(this,c,d,e):(this.adWidth=c,this.adHeight=d,b.prototype.resizeAd.call(this,c,d),void this.dispatchEvent(a.VPAIDEvent.AdSizeChange))},c.prototype.getAdWidth=function(){return this.adWidth},c.prototype.getAdHeight=function(){return this.adHeight},c.prototype.skipAd=function(){this.isVpaid2&&b.prototype.skipAd.call(this)},c.prototype.getAdSkippableState=function(){return this.isVpaid2?b.prototype.getAdSkippableState.call(this):!1},c.prototype.getAdIcons=function(){return this.isVpaid2?b.prototype.getAdIcons.call(this):!1},c.prototype.getAdCompanions=function(){return this.isVpaid2?b.prototype.getAdCompanions.call(this):""},c.prototype.getAdDuration=function(){return this.isVpaid2?b.prototype.getAdDuration.call(this):this.adDuration},c.prototype.handleVpaidEvent=function(c){if(!this.isVpaid2)switch(c.type){case a.VPAIDEvent.AdRemainingTimeChange:this.getAdRemainingTime()>0&&(this.adDuration<=0||this.getAdRemainingTime()>this.adDuration)&&(this.adDuration=this.getAdRemainingTime())}b.prototype.handleVpaidEvent.call(this,c)},c}(a.VPAIDWrapper);a.VPAID2Over1=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(b){function c(){b.apply(this,arguments)}return __extends(c,b),c.prototype.startAd=function(){this.vpaid.resumeAd()},c.prototype.handleVpaidEvent=function(c,d){if(!this.adStarted&&!d)switch(c.type){case a.VPAIDEvent.AdLoaded:return void this.vpaid.startAd();case a.VPAIDEvent.AdStarted:return this.vpaid.pauseAd(),void this.handleVpaidEvent(new a.VPAIDEvent(a.VPAIDEvent.AdLoaded),!0);case a.VPAIDEvent.AdPlaying:case a.VPAIDEvent.AdVideoStart:this.adStarted=!0,this.dispatchEvent(a.VPAIDEvent.AdStarted);break;default:return}b.prototype.handleVpaidEvent.call(this,c)},c}(a.VPAID2Over1);a.AdManagerWrapper=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function b(b,c){this.container=b,this.config=c,this.status=a.LoaderStatus.READY}return b.prototype.load=function(b,c,d){var e=this;if(!(this.status>a.LoaderStatus.READY)){var f,g;this.config.sandbox?(this.creativeType=a.CreativeType.POSTMESSAGE,g=a.PostMessageContainer):b.indexOf(".swf")>0?(this.creativeType=a.CreativeType.SWF,g=a.VPAIDSWFContainer):(this.creativeType=a.CreativeType.JS,g=a.VPAIDJSContainer),this.container.innerHTML="",this.status=a.LoaderStatus.LOADING;var h=function(b){try{e.status=a.VpaidStatus.LOADED,e.wrapper||(e.wrapper=e.creativeType!==a.CreativeType.SWF||a.VPAIDHelper.isVPAID2(b)?a.VPAIDWrapper:a.VPAID2Over1);var g=new e.wrapper(f);try{c(g)}catch(h){d("callback success function throw an exception "+h)}}catch(h){d("Loader.load throw an exception "+h)}};f=new g(this.container,this.config),f.loadVpaid(b,h,d)}},b}();a.VPAIDLoader=b}(b=a.vpaid||(a.vpaid={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){a.ASSETS={vpaidvideojs:"teads-vpaid-video.min.js",vpaidcanvas:"teads-vpaid-canvas.min.js",vpaidvideoswf:"teads-vpaid-video.swf",vastcorsloader:"cors.swf",vpaidswfwrapper:"vpaidwrapper.swf"}}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.canPlayType=function(a){try{return!!document.createElement("video").canPlayType(a).replace(/^no/,"")}catch(b){return!1}},a}();a.VideoHelper=b}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){!function(a){a[a.UNSUPPORTED=0]="UNSUPPORTED",a[a.FLASH=1]="FLASH",a[a.JS=2]="JS",a[a.VPAID=3]="VPAID",a[a.CANVAS=4]="CANVAS"}(a.MediaProvider||(a.MediaProvider={}));a.MediaProvider}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){b.trackingMapping={click:a.vpaid.VPAIDEvent.AdClickThru,pause:a.vpaid.VPAIDEvent.AdPaused,resume:a.vpaid.VPAIDEvent.AdPlaying,skip:a.vpaid.VPAIDEvent.AdSkipped,creativeView:a.vpaid.VPAIDEvent.AdStarted,start:a.vpaid.VPAIDEvent.AdVideoStart,firstQuartile:a.vpaid.VPAIDEvent.AdVideoFirstQuartile,midpoint:a.vpaid.VPAIDEvent.AdVideoMidpoint,thirdQuartile:a.vpaid.VPAIDEvent.AdVideoThirdQuartile,complete:a.vpaid.VPAIDEvent.AdVideoComplete,impression:a.vpaid.VPAIDEvent.AdImpression,close:a.vpaid.VPAIDEvent.AdUserClose,closeLinear:a.vpaid.VPAIDEvent.AdUserClose,progress:a.vpaid.VPAIDEvent.AdRemainingTimeChange}}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(){}return c.weightMediaFiles=function(b){return b.weight=0,b.api&&b.api.toLowerCase&&(b.api=b.api.toLowerCase()),b.type&&b.type.toLowerCase&&(b.type=b.type.toLowerCase()),b.delivery&&b.delivery.toLowerCase&&(b.delivery=b.delivery.toLowerCase()),"vpaid"===b.api&&(b.weight+=b.type.indexOf("javascript")>=0?2e3:a.Context.isMobile()||a.Context.isIpad()?0:10),"video/mp4"===b.type?b.weight+=100:"video/x-flv"!==b.type||a.Context.isMobile()||a.Context.isIpad()||(b.weight+=50),(a.Context.isMobile(a.MobileName.IPHONE)||a.Context.isIpad())&&(b.weight=0),("video/mpg"===b.type||"video/mpeg"===b.type)&&(a.Context.isMobile()||a.Context.isIpad()?a.Context.isMobile(a.MobileName.IPHONE)&&a.Context.getIosVersion()>=8?b.weight+=2e3:a.Context.isAndroid()?a.Context.isAndroidMobile()&&a.Context.getAndroidVersion()>=442?b.weight+=75:b.weight+=50:a.Context.isIpad()&&(b.weight+=50):a.Context.isIE()||(b.weight+=75)),0===b.url.indexOf("rtmp://")&&(b.weight=0),b},c.extractMediaFilesByBitrate=function(b,c){var d;return a.ArrayHelper.forEach(b,function(a,b){var e=Math.abs(a.bitrate-c);(!d||e<d.diff)&&(d={diff:e,media:a})}),[d.media]},c.getMediaProvider=function(c){var d=b.MediaProvider.UNSUPPORTED;switch(c.type){case"video/x-flv":d=b.MediaProvider.FLASH;break;case"application/x-shockwave-flash":case"application/x-javascript":case"application/javascript":case"text/javascript":d=b.MediaProvider.VPAID;break;case"video/mp4":d=b.VideoHelper.canPlayType(c.type)?b.MediaProvider.JS:b.MediaProvider.FLASH;break;case"video/mpg":case"video/mpeg":d=b.MediaProvider.CANVAS;break;default:b.VideoHelper.canPlayType(c.type)&&(d=b.MediaProvider.JS)}return d!==b.MediaProvider.FLASH||a.Utils.hasFlash()||(d=b.MediaProvider.UNSUPPORTED),d},c.getOptimalMediaFiles=function(b,d,e){if(0===b.length)return null;var f=0;b=a.ArrayHelper.map(b,c.weightMediaFiles),b=a.ArrayHelper.filter(b,function(a){return f=a.weight>=f?a.weight:f,!!a.weight}),b=a.ArrayHelper.filter(b,function(a){return a.weight===f}),(a.Context.isMobile()||a.Context.isIpad())&&b.length>1&&b[1].type===b[0].type?c.sortByPing(b,e):e(b,null)},c.sortByPing=function(b,d){var e,f,g,h=a.Request.createXmlHttpRequest(),i=Date.now(),j=function(h){e||(clearTimeout(g),e=Date.now()-i,f=100>=e?1e3:200>e?700:400>e?500:100,
b=c.extractMediaFilesByBitrate(b,f),d(b,e),a.LogSender.sumologic({name:"sortByPing",ping:e,target:f,get:b[0].bitrate,type:b[0].type,event:h,version:"0.8.0",ua:navigator.userAgent,url:b[0].url},!0))};g=setTimeout(function(){return j("timeout")},500),h.open("HEAD",b[0].url+(b[0].url.indexOf("?")>-1?"&":"?")+i,!0),h.addEventListener("load",function(){return j("load")}),h.addEventListener("error",function(){j("error")}),h.send()},c.getOptimalMediaFile=function(b,d,e){c.getOptimalMediaFiles(b,d,function(b,c){e(b.length?b[0]:null),a.Wigo&&b.length&&a.Wigo.valid(2,2,b[0].url.split("/").pop()+(c?" -> ping: "+c+"ms":""),a.Wigo.infoType.STRING)})},c.getOptimalHeight=function(a,b){return b?a.height&&a.width?Math.ceil(a.height*(b/a.width)):Math.ceil(b/16*9):0},c.getAssetFromMediaProvider=function(a){var c;switch(a){case b.MediaProvider.JS:c=b.ASSETS.vpaidvideojs;break;case b.MediaProvider.FLASH:c=b.ASSETS.vpaidvideoswf;break;case b.MediaProvider.CANVAS:c=b.ASSETS.vpaidcanvas;break;default:c=""}return c},c.logger=new a.Logger("player.MediaFileHelper"),c}();b.MediaFileHelper=c}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f){this.container=b,this.config=c,this.vpaidAd=d,this.mediaFile=e,this.logger=new a.Logger("player.plugin.Responsive"),this.attributeName="data-responsive"}return c.prototype.init=function(){this.vpaidAd.subscribe(this.onVpaidStart,a.vpaid.VPAIDEvent.AdStarted,this)},c.prototype.deinit=function(){this.vpaidAd.unsubscribe(this.onVpaidStart,a.vpaid.VPAIDEvent.AdStarted),this.unsetResponsive()},c.prototype.setResponsive=function(){var c=this,d=this.container.offsetWidth;if(this.container.getAttribute(this.attributeName))return!1;this.vpaidAd.subscribe(function(){c.unsetResponsive()},a.vpaid.VPAIDEvent.AdError),this.vpaidAd.subscribe(function(){c.unsetResponsive()},a.vpaid.VPAIDEvent.AdStopped);var e=function(){try{c.container.offsetWidth!==c.vpaidAd.getAdWidth()&&(d=c.container.offsetWidth,c.vpaidAd.resizeAd(d,b.MediaFileHelper.getOptimalHeight(c.mediaFile,d),"normal"))}catch(a){c.unsetResponsive()}};e();var f=setInterval(e,1);return this.container.setAttribute(this.attributeName,String(f)),!0},c.prototype.unsetResponsive=function(){try{var a=Number(this.container.getAttribute(this.attributeName));return a?(clearInterval(a),this.container.removeAttribute(this.attributeName),!0):!1}catch(b){return!1}},c.prototype.onVpaidStart=function(){if(!this.config.width)try{this.setResponsive()}catch(a){this.logger.error("Exception raised while trying to initialize",a)}},c}();c.Responsive=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(b){var c=function(){function b(a,b,c,d,e){this.vpaidAd=c,this.linearAd=e}return b.prototype.init=function(){this.vpaidAd.subscribe(this.onClickThrough,a.vpaid.VPAIDEvent.AdClickThru,this)},b.prototype.deinit=function(){this.vpaidAd.unsubscribe(this.onClickThrough,a.vpaid.VPAIDEvent.AdClickThru)},b.prototype.onClickThrough=function(a,b,c){var d=a||this.linearAd.clickThrough[0];c&&d&&window.open(d)},b}();b.ClickThrough=c}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function b(a,b,c,d,e,f){void 0===b&&(b=[]),void 0===c&&(c=[]),void 0===d&&(d=!1),void 0===e&&(e=!0),void 0===f&&(f=[]),this.name=a,this.before=b,this.after=c,this.multiple=d,this.metadata=e,this.resources=f,this.tracked=[],"progress"===a&&(this.multiple=!0)}return b.prototype.getName=function(){return this.name},b.prototype.getBefore=function(){return this.before},b.prototype.getAfter=function(){return this.after},b.prototype.isMultiple=function(){return this.multiple},b.prototype.isMetadata=function(){return this.metadata},b.prototype.getResources=function(b){return a.ArrayHelper.filter(this.resources,function(a){return!(a.offset>0)||b>=0&&a.offset>=0&&b>=a.offset&&!a.fired})},b.prototype.getAllResources=function(){return this.resources},b.prototype.removeResources=function(){this.resources=[]},b.prototype.hasResources=function(){return this.resources.length>0},b.prototype.addResource=function(a,b){this.resources.push({url:a,offset:b})},b.prototype.setTracked=function(){this.eventIsTracked=!0},b.prototype.isTracked=function(){return this.eventIsTracked},b.prototype.addTracked=function(a,b){this.tracked.push({time:b,url:a})},b.prototype.getTracked=function(){return this.tracked},b.prototype.isTrackable=function(){return!this.eventIsTracked||this.isMultiple()},b}();b.Tracking=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function b(b,c,d){if(void 0===d&&(d=!0),this.key=b,this.value=c,this.multiple=d,this.logger=new a.Logger("tracker.Metadata"),!b)throw new Error("Metadata key is mandatory")}return b.prototype.isMultiple=function(){return this.multiple},b.prototype.getKey=function(){return this.key},b.prototype.getValue=function(){var a=this.value;if("function"==typeof a)try{return String(a()||"")}catch(b){return this.logger.warn("getValue: error while trying to execute value function:",b),""}return String(a||"")},b.prototype.getUrlPiece=function(){return encodeURIComponent(this.getKey())+"="+encodeURIComponent(this.getValue())},b}();b.Metadata=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(a){var b=function(){function a(){}return a.format=[{name:"callJS"},{name:"adTimeout"},{name:"adCall"},{name:"adStartJS"},{name:"vpaidError"},{name:"vastError"},{name:"ad"},{name:"noAd"},{name:"passback"}],a.vast=[{name:"error"},{name:"fullscreen",multiple:!0},{name:"exitFullscreen",multiple:!0},{name:"click",multiple:!0},{name:"creativeView"},{name:"impression"},{name:"start"},{name:"firstQuartile"},{name:"midpoint"},{name:"thirdQuartile"},{name:"complete"},{name:"pause",before:["start"],multiple:!0},{name:"resume",before:["pause"],multiple:!0},{name:"mute",multiple:!0},{name:"unmute",multiple:!0},{name:"expand",multiple:!0},{name:"collapse",multiple:!0},{name:"rewind",multiple:!0},{name:"skip"},{name:"close"},{name:"progress",multiple:!0,before:["start"]}],a}();a.Config=b}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(c){this.logger=new a.Logger("tracker.Tracker"),this.trackings={},this.metadatas=[],this.errors=[],this.errorUrls=[],c instanceof Array?this.setTrackings(c):this.setTrackings(b.Config.vast),this.logger.info("new",this)}return c.prototype.setTrackings=function(b){return b instanceof Array?void a.ArrayHelper.forEach(b,function(a){this.setTracking(a)},this):void this.logger.error("setTrackings param error, expected array.",b)},c.prototype.setTracking=function(a){return a.name?void(this.trackings[a.name]=new b.Tracking(a.name,a.before,a.after,a.multiple,a.metadata,a.resources)):void this.logger.error("Name of tracking is needed",a)},c.prototype.getTracking=function(a){return this.trackings[a]},c.prototype.getTrackedEvents=function(){var a,b=[];for(var c in this.trackings)this.trackings.hasOwnProperty(c)&&(a=this.trackings[c],a.isTracked()&&b.push(a));return b},c.prototype.addResource=function(b,c,d){if(!a.StringHelper.isURL(c))return this.logger.error("URL format",c),!1;if("progress"===b&&!d)return this.logger.error('Adding a "progress" tracking requires an associated offset',c),!1;var e=this.getTracking(b);if(e){var f=e.getAllResources();if(f.length){var g=!1;if(a.ArrayHelper.forEach(f,function(a){g||(g=c===a.url)}),g)return this.logger.warn("URL already exists"),!1}return e.addResource(c,d),!0}return this.logger.error("This event ("+b+") does not exist in config"),!1},c.prototype.addResources=function(b){return b instanceof Array?(a.ArrayHelper.forEach(b,function(b){a.ArrayHelper.forEach(b.resources,function(a){this.addResource(b.event,a.url,a.offset)},this)},this),!0):!1},c.prototype.isTrackable=function(b){var c=this.getTracking(b);if(!c)return this.trackError(b,"This event ("+b+") does not exist in config"),!1;if(!c.isTrackable())return!1;if(!c.hasResources())return!0;if(c){var d=!0,e=!0,f=c.getBefore(),g=c.getAfter();return f.length&&(d=a.ArrayHelper.some(f,function(a){var b=this.getTracking(a),c=b&&!b.isTrackable(),d=b&&b.isTracked();return d||c||!b},this),d||this.trackError(b,"Previous event ["+c.getBefore().join(",")+"] was not tracked")),g.length&&(e=a.ArrayHelper.some(g,function(a){var b=this.getTracking(a),c=b&&b.isTrackable(),d=b&&!b.isTracked();return d||c||!b},this),e||this.trackError(b,"Next event ["+c.getAfter().join(",")+"] are already tracked")),d&&e}},c.prototype.track=function(b,c,d,e){void 0===c&&(c={});var f=this.getTracking(b);if(!this.isTrackable(b))return this.logger.warn("This event ("+b+") is not trackable"),!1;if("progress"===b&&(null===d||isNaN(d)))return this.trackError(b,"This event ("+b+") needs the current progress time (in seconds)"),!1;var g=f.getResources(d);return a.ArrayHelper.forEach(g,function(a){var e=a.url;f&&f.isMetadata()&&(e=this.processMetadata(e));for(var g in c)c.hasOwnProperty(g)&&(e=e.replace(g,c[g]));var h=new Image;h.src=e,a.fired=!0,this.logger.debug("track ["+b+(d?"@"+d.toFixed(2)+"s":"")+"]: ",e),f.addTracked(e,d),this.callback(b,!0)},this),a.Wigo&&a.Wigo.videoEvent(b,d?d.toFixed(2)||d.toString():"undefined",e?100*d/e:0,g),f.setTracked(),!0},c.prototype.setMetadata=function(a,c,d){if(void 0===d&&(d=!0),"string"!=typeof a||!a)return this.logger.warn("setMetadata: key is mandatory (string).",a),!1;if("string"!=typeof c&&"function"!=typeof c)return this.logger.warn("setMetadata: value: String or Function expected.",c),!1;if("boolean"!=typeof d)return this.logger.warn("setMetadata: multiple: Boolean expected.",d),!1;var e=new b.Metadata(a,c,d);return e?(this.metadatas.push(e),!0):!1},c.prototype.processMetadata=function(a){for(var b,c,d=this.metadatas.length-1;d>=0;d--)b=this.metadatas[d],c=b.getKey(),0===c.indexOf("[")?a=a.replace(c,b.getValue()):a+=(a.indexOf("?")>=0?"&":"?")+b.getUrlPiece(),b.isMultiple()||this.metadatas.splice(d,1);return a},c.prototype.getTrackingsInfo=function(){var b,c={};for(var d in this.trackings)if(this.trackings.hasOwnProperty(d)){b=this.trackings[d];var e=b.getTracked();a.ArrayHelper.forEach(e,function(a,d){var e=new Date(a.time);c[b.getName()+"-"+d]={event:b.getName(),url:a.url,time:e.toTimeString().substr(0,8)+"."+e.getMilliseconds()}})}this.logger.table(c),this.logger.table(this.errors)},c.prototype.setTrackingError=function(b){return a.StringHelper.isURL(b)?void this.errorUrls.push(b):(this.logger.error("setTrackingError: wrong URL format",b),!1)},c.prototype.trackError=function(b,c){this.logger.warn("Track errors:",b,c),this.callback(b,"false");var d=new Date;this.errors.push({event:b,message:c,time:d.getHours()+":"+d.getMinutes()+":"+d.getSeconds()+"."+d.getMilliseconds()}),a.ArrayHelper.forEach(this.errorUrls,function(a){a+="&event="+encodeURIComponent(b),a+="&message="+encodeURIComponent(c);var d=new Image;d.src=this.formatUrl(a)})},c.prototype.callback=function(a,b){if("function"==typeof this.handler)try{this.handler(a,b)}catch(c){this.logger.error("Callback error ("+a+"):",c)}},c.prototype.setCallback=function(a){"function"==typeof a&&(this.handler=a)},c}();b.Tracker=c}(b=a.tracker||(a.tracker={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(c){var d=function(){function c(b,c,d,e,f){this.vpaidAd=d,this.mediaFile=e,this.linearAd=f,this.logger=new a.Logger("player.plugin.Tracker")}return c.prototype.init=function(){var c=this;this.logger.debug("init");try{this.tracker=new a.tracker.Tracker;var d={},e=function(b,e){void 0===e&&(e=null);var f=c.vpaidAd.getAdDuration()-c.vpaidAd.getAdRemainingTime()||0,g={"[CONTENTPLAYHEAD]":a.Utils.offset(f),"[CACHEBUSTING]":a.StringHelper.rand(8),"[ERRORCODE]":"","[ASSETURI]":String(c.mediaFile.url)};switch(e){case a.vpaid.VPAIDEvent.AdError:g["[ERRORCODE]"]="901"}c.tracker.track(b,g,f,c.vpaidAd.getAdDuration()),d[b]=!0},f=function(a){c.vpaidAd.subscribe(function(){e(a,b.trackingMapping[a])},b.trackingMapping[a])};for(var g in this.linearAd.tracking){var h=this.linearAd.tracking[g];h&&(a.ArrayHelper.forEach(h,function(a,b,d){c.tracker.addResource(g,a.url,a.data)},this),f(g))}var i=!this.vpaidAd.getAdVolume(),j=function(){i&&c.vpaidAd.getAdVolume()>0?e("unmute",a.vpaid.VPAIDEvent.AdVolumeChange):i||0!==c.vpaidAd.getAdVolume()||e("mute",a.vpaid.VPAIDEvent.AdVolumeChange),i=!c.vpaidAd.getAdVolume()},k=function(){i=!c.vpaidAd.getAdVolume()};this.vpaidAd.subscribe(k,a.vpaid.VPAIDEvent.AdLoaded),this.vpaidAd.subscribe(k,a.vpaid.VPAIDEvent.AdStarted),this.vpaidAd.subscribe(j,a.vpaid.VPAIDEvent.AdVolumeChange);var l,m;l=function(){d.start||(c.logger.warn('VPAID creative did not dispatch AdVideoStart event but is playing, force tracking "start"'),e("start",a.vpaid.VPAIDEvent.AdVideoStart)),d.start&&!m&&(m=!0,c.vpaidAd.unsubscribe(l,a.vpaid.VPAIDEvent.AdVideoStart),c.vpaidAd.unsubscribe(l,a.vpaid.VPAIDEvent.AdPlaying),c.vpaidAd.unsubscribe(l,a.vpaid.VPAIDEvent.AdVideoFirstQuartile),c.vpaidAd.unsubscribe(l,a.vpaid.VPAIDEvent.AdVideoComplete))},this.vpaidAd.subscribe(l,a.vpaid.VPAIDEvent.AdVideoStart),this.vpaidAd.subscribe(l,a.vpaid.VPAIDEvent.AdPlaying),this.vpaidAd.subscribe(l,a.vpaid.VPAIDEvent.AdVideoFirstQuartile),this.vpaidAd.subscribe(l,a.vpaid.VPAIDEvent.AdVideoComplete);var n,o=function(){var b=a.HTMLHelper.isFullscreen()||c.vpaidAd.getAdExpanded();!n&&b?(e("fullscreen"),e("expand")):n&&!b&&(e("exitFullscreen"),e("collapse")),n=b};a.ArrayHelper.forEach(["webkitfullscreenchange","mozfullscreenchange","fullscreenchange","MSFullscreenChange"],function(a){document.addEventListener(a,function(){o()})}),this.vpaidAd.subscribe(o,a.vpaid.VPAIDEvent.AdExpandedChange)}catch(p){this.logger.error("exception caught:",p)}},c.prototype.deinit=function(){this.logger.debug("deinit")},c.prototype.removeResources=function(a){try{this.tracker.getTracking(a).removeResources()}catch(b){this.logger.error("Remove tracking resources for event "+a+" throw an exception",b)}},c}();c.Tracker=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={})),window.requestAnimFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||function(a){window.setTimeout(a,1e3/60)}}();try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c;!function(b){var c;!function(a){a[a.MIN=0]="MIN",a[a.MAX=1]="MAX",a[a.MOY=2]="MOY"}(c||(c={}));var d=function(){function b(b,c,d,e,f){this.container=b,this.config=c,this.vpaidAd=d,this.mediaFile=e,this.benchFps={},this.totalFps=0,this.currentTime=0,this.stalledCount=0,this.logger=new a.Logger("player.plugin.Bench"),this.enable=a.Context.isMobile()||a.Context.isIpad(),a.LogSender.enable=this.enable}return b.prototype.init=function(){this.enable&&this.bindEvent()},b.prototype.deinit=function(){this.enable&&(this.vpaidAd.unsubscribe(this.benchEnd,a.vpaid.VPAIDEvent.AdStopped),this.vpaidAd.unsubscribe(this.benchStart,a.vpaid.VPAIDEvent.AdStarted),clearInterval(this.interBench),this.interBench=null)},b.prototype.bindEvent=function(){var b=this,c=this.container.getElementsByTagName("video")?this.container.getElementsByTagName("video")[0]:null;c&&c.addEventListener("waiting",function(){return b.stalledCount++}),this.vpaidAd.subscribe(this.benchStart,a.vpaid.VPAIDEvent.AdStarted,this),this.vpaidAd.subscribe(this.benchEnd,a.vpaid.VPAIDEvent.AdStopped,this)},b.prototype.benchStart=function(){var a=this;this.startTime=Date.now(),this.interBench=setInterval(function(){return a.fillBench()},1e3),window.requestAnimFrame(function(){return a.loopRequestAnimFrame()})},b.prototype.benchEnd=function(){var b=this,c=document.createElement("script");c.src="//wurfl.io/wurfl.js",c.onload=function(){var c=b.createBenchData();if(window.teadsCanvasPlayerBench)for(var d in window.teadsCanvasPlayerBench)c[d]=window.teadsCanvasPlayerBench[d];b.logger.info(c),a.LogSender.sumologic(c)},document.body.appendChild(c)},b.prototype.createBenchData=function(){return{benchDuration:(Date.now()-this.startTime)/1e3,videoDuration:this.vpaidAd.getAdDuration(),video:this.mediaFile.url,bitrate:this.mediaFile.bitrate||0,deviceMinFps:this.getFps(c.MIN),deviceMaxFps:this.getFps(c.MAX),deviceMoyFps:this.getFps(c.MOY),ua:window.navigator.userAgent,href:window.location.href,date:(new Date).toLocaleString(),wurfl:window.WURFL,stalledCount:this.stalledCount,playerPackage:{name:"teads-player",version:"0.8.0"}}},b.prototype.getFps=function(a){var b,d=0,e=0;for(var f in this.benchFps)if(b)switch(a){case c.MIN:b=this.benchFps[f]<b.value?{value:this.benchFps[f],when:f}:b;break;case c.MAX:b=this.benchFps[f]>b.value?{value:this.benchFps[f],when:f}:b;break;case c.MOY:d+=this.benchFps[f],e++,b={value:d/e}}else b={value:this.benchFps[f],when:f};return b},b.prototype.loopRequestAnimFrame=function(){var a=this;this.totalFps++,window.requestAnimFrame(function(){return a.loopRequestAnimFrame()})},b.prototype.fillBench=function(){this.benchFps[this.currentTime+"-"+ ++this.currentTime+"sec"]=this.totalFps,this.totalFps=0},b}();b.Bench=d}(c=b.plugin||(b.plugin={}))}(b=a.player||(a.player={}))}(teads||(teads={}));try{var teads=teads||window.top.teads}catch(e){var teads=teads||window.teads}!function(a){var b;!function(b){var c=function(){function c(b,c){this.container=b,this.config=c,this.logger=new a.Logger("player.VASTPlayer"),this.plugins=[],this.logger.info("new",this),this.vastLib=new a.vast.VASTLib({assetsUrl:this.config.path}),a.Wigo&&a.Wigo.valid(2,0)}return c.prototype.loadVast=function(b,c,d){var e=this,f=function(d){e.linearAd=d,c(e.linearAd),a.Wigo&&a.Wigo.valid(2,1,b,a.Wigo.infoType.VAST)};this.vastLib.load(b,f,d)},c.prototype.parseVast=function(b,c,d){var e=this,f=function(b){e.linearAd=b,c(e.linearAd),a.Wigo&&a.Wigo.valid(2,1)};this.vastLib.parse(b,f,d)},c.prototype.playOptimalMediaFile=function(a,c,d){var e=this;b.MediaFileHelper.getOptimalMediaFile(this.linearAd.mediaFiles,a,function(a){return e.playMediaFile(a,c,d)})},c.prototype.loadOptimalMediaFile=function(a,c){var d=this;b.MediaFileHelper.getOptimalMediaFile(this.linearAd.mediaFiles,this.linearAd.adParameters,function(b){return d.loadMediaFile(b,a,c)})},c.prototype.playMediaFile=function(b,c,d){if(!b){var e="no valid media file found in VAST file for this context";return d(e),void this.logger.error({msg:e,ua:navigator.userAgent,mediafiles:this.linearAd.mediaFiles})}var f=function(b,d){c(b,d),b.subscribe(function(){b.startAd()},a.vpaid.VPAIDEvent.AdLoaded),b.initAd(d.width,d.height,d.mode,d.bitrate,d.parameters)};this.loadMediaFile(b,f,d)},c.prototype.loadMediaFile=function(c,d,e){var f=this;if(!c){var g="no valid media file found in VAST file for this context";return e(g),void this.logger.error({msg:g,ua:navigator.userAgent,mediafiles:this.linearAd.mediaFiles})}var h=b.MediaFileHelper.getMediaProvider(c),i=c.url,j=this.config.width?this.config.width:this.container.offsetWidth,k={width:j,height:this.config.height?this.config.height:b.MediaFileHelper.getOptimalHeight(c,j),mode:"normal",bitrate:c.bitrate||512,parameters:this.linearAd.adParameters};switch(h){case b.MediaProvider.VPAID:break;case b.MediaProvider.FLASH:case b.MediaProvider.JS:case b.MediaProvider.CANVAS:i=this.config.path+"/"+b.MediaFileHelper.getAssetFromMediaProvider(h);var l=this.config.path.match("/dist")||0===this.config.path.indexOf("http")?this.config.path.match("/dist")?window.location.protocol+window.location.host+this.config.path:this.config.path:window.location.protocol+this.config.path,m=this.linearAd.clickThrough.length?this.linearAd.clickThrough[0]:null;k.parameters={url:c.url,debug:this.config.debug,clickThrough:m,skippable:this.linearAd.skippable,skipoffset:this.linearAd.skipDelay,assetsPath:l},h===b.MediaProvider.FLASH?k.parameters=JSON.stringify(k.parameters):k.parameters={AdParameters:JSON.stringify(k.parameters)};break;case b.MediaProvider.UNSUPPORTED:default:return void e("unsupported media file "+c.url)}this.container.innerHTML="";var n={path:this.config.path,debug:this.config.debug},o=new a.vpaid.VPAIDLoader(this.container,n),p=function(g){try{f.vpaidAd=g,f.mediafile=c;for(var i in b.plugin)try{var j=b.plugin[i];f.plugins[i]&&f.plugins[i].deinit(),f.plugins[i]=new j(f.container,f.config,g,c,f.linearAd),f.plugins[i].init()}catch(l){f.logger.error("Could not initialize plugin "+i,l)}d(g,k),a.Wigo&&a.Wigo.valid(2,3,b.MediaFileHelper.getAssetFromMediaProvider(h),a.Wigo.infoType.STRING)}catch(l){e(l)}};o.load(i,p,e)},c.prototype.getPlugin=function(a){return this.plugins[a]},c}();b.VASTPlayer=c}(b=a.player||(a.player={}))}(teads||(teads={})),__extends(window.teads,teads)}(window.teads=window.teads||{});